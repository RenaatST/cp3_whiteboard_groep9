!function e(o,t,n){function s(r,l){if(!t[r]){if(!o[r]){var d="function"==typeof require&&require;if(!l&&d)return d(r,!0);if(i)return i(r,!0);var a=new Error("Cannot find module '"+r+"'");throw a.code="MODULE_NOT_FOUND",a}var u=t[r]={exports:{}};o[r][0].call(u.exports,function(e){var t=o[r][1][e];return s(t?t:e)},u,u.exports,e,o,t,n)}return t[r].exports}for(var i="function"==typeof require&&require,r=0;r<n.length;r++)s(n[r]);return s}({1:[function(e){!function(){function o(){new t}var t=e("./classes/WhiteboardApplication");o()}()},{"./classes/WhiteboardApplication":2}],2:[function(e,o){o.exports=function(){function o(){$("#addimg").on("click",function(){var e=new n(Math.random()*window.innerWidth,Math.random()*window.innerHeight);document.getElementById("cnvszelf").appendChild(e.el)}),$("#addvideo").on("click",function(){var e=new AddVideo(Math.random()*window.innerWidth,Math.random()*window.innerHeight);document.getElementById("cnvszelf").appendChild(e.el)}),$("#addnote").on("click",function(){var e=new t(Math.random()*window.innerWidth,Math.random()*window.innerHeight);document.getElementById("cnvszelf").appendChild(e.el)})}function t(e,o){console.log("created new block"),this.el=document.createElement("div"),this.el.classList.add("note"),this.el.style.left=e+"px",this.el.style.top=o+"px",this.el.addEventListener("mousedown",this.mouseDownHandler.bind(this))}function n(e,o){console.log("created new block"),this.el=document.createElement("div"),this.el.classList.add("image"),this.el.style.left=e+"px",this.el.style.top=o+"px",this.el.addEventListener("mousedown",this.mouseDownHandler.bind(this))}e("./WhiteboardHandler");return t.prototype.mouseDownHandler=function(e){console.log(e),this.offsetX=e.offsetX,this.offsetY=e.offsetY,this._mouseMoveHandler=this.mouseMoveHandler.bind(this),this._mouseUpHandler=this.mouseUpHandler.bind(this),window.addEventListener("mousemove",this._mouseMoveHandler),window.addEventListener("mouseup",this._mouseUpHandler),this.el.style.zIndex=100},t.prototype.mouseUpHandler=function(e){console.log("mouseup"),console.log(e),window.removeEventListener("mousemove",this._mouseMoveHandler),window.removeEventListener("mouseup",this._mouseUpHandler),this.el.style.zIndex=0},t.prototype.mouseMoveHandler=function(e){console.log(this),console.log(e),this.el.style.left=e.x-this.offsetX+"px",this.el.style.top=e.y-this.offsetY+"px"},n.prototype.mouseDownHandler=function(e){console.log(e),this.offsetX=e.offsetX,this.offsetY=e.offsetY,this._mouseMoveHandler=this.mouseMoveHandler.bind(this),this._mouseUpHandler=this.mouseUpHandler.bind(this),window.addEventListener("mousemove",this._mouseMoveHandler),window.addEventListener("mouseup",this._mouseUpHandler),this.el.style.zIndex=100},n.prototype.mouseUpHandler=function(e){console.log("mouseup"),console.log(e),window.removeEventListener("mousemove",this._mouseMoveHandler),window.removeEventListener("mouseup",this._mouseUpHandler),this.el.style.zIndex=0},n.prototype.mouseMoveHandler=function(e){console.log(this),console.log(e),this.el.style.left=e.x-this.offsetX+"px",this.el.style.top=e.y-this.offsetY+"px"},o}()},{"./WhiteboardHandler":3}],3:[function(e,o){o.exports=function(){function e(){$form=$("<form method='post' action='' style='left:200px;top:200px;></form>"),$form.append("<textarea rows='4' cols='50' maxlength='259'></textarea>"),$form.on("mousedown",mouseDownHandler).bind(this),$(".canvaszelf").append($form)}return e.prototype.mouseDownHandler=function(){},e.prototype.mouseMoveHandler=function(){},e.prototype.mouseUpHandler=function(){},e}()},{}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJqcy9zcmMvc2NyaXB0LmpzIiwianMvc3JjL2NsYXNzZXMvV2hpdGVib2FyZEFwcGxpY2F0aW9uLmpzIiwianMvc3JjL2NsYXNzZXMvV2hpdGVib2FyZEhhbmRsZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkNBQUEsUUFBQSxHQUFBLEVBQUEsRUFBQSxHQUFBLFFBQUEsR0FBQSxFQUFBLEdBQUEsSUFBQSxFQUFBLEdBQUEsQ0FBQSxJQUFBLEVBQUEsR0FBQSxDQUFBLEdBQUEsR0FBQSxrQkFBQSxVQUFBLE9BQUEsS0FBQSxHQUFBLEVBQUEsTUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEVBQUEsTUFBQSxHQUFBLEdBQUEsRUFBQSxJQUFBLEdBQUEsR0FBQSxPQUFBLHVCQUFBLEVBQUEsSUFBQSxNQUFBLEdBQUEsS0FBQSxtQkFBQSxFQUFBLEdBQUEsR0FBQSxFQUFBLElBQUEsV0FBQSxHQUFBLEdBQUEsR0FBQSxLQUFBLEVBQUEsUUFBQSxTQUFBLEdBQUEsR0FBQSxHQUFBLEVBQUEsR0FBQSxHQUFBLEVBQUEsT0FBQSxHQUFBLEVBQUEsRUFBQSxJQUFBLEVBQUEsRUFBQSxRQUFBLEVBQUEsRUFBQSxFQUFBLEdBQUEsTUFBQSxHQUFBLEdBQUEsUUFBQSxJQUFBLEdBQUEsR0FBQSxrQkFBQSxVQUFBLFFBQUEsRUFBQSxFQUFBLEVBQUEsRUFBQSxPQUFBLElBQUEsRUFBQSxFQUFBLEdBQUEsT0FBQSxLQUFBLEdBQUEsU0FBQSxJQ0FBLFdBSUEsUUFBQSxLQUVBLEdBQUEsR0FKQSxHQUFBLEdBQUEsRUFBQSxrQ0FPQSxpRUNUQSxFQUFBLFFBQUEsV0FLQSxRQUFBLEtBRUEsRUFBQSxXQUFBLEdBQUEsUUFBQSxXQUNBLEdBQUEsR0FBQSxHQUFBLEdBQ0EsS0FBQSxTQUFBLE9BQUEsV0FDQSxLQUFBLFNBQUEsT0FBQSxZQUVBLFVBQUEsZUFBQSxZQUFBLFlBQUEsRUFBQSxNQUVBLEVBQUEsYUFBQSxHQUFBLFFBQUEsV0FDQSxHQUFBLEdBQUEsR0FBQSxVQUNBLEtBQUEsU0FBQSxPQUFBLFdBQ0EsS0FBQSxTQUFBLE9BQUEsWUFFQSxVQUFBLGVBQUEsWUFBQSxZQUFBLEVBQUEsTUFHQSxFQUFBLFlBQUEsR0FBQSxRQUFBLFdBQ0EsR0FBQSxHQUFBLEdBQUEsR0FDQSxLQUFBLFNBQUEsT0FBQSxXQUNBLEtBQUEsU0FBQSxPQUFBLFlBRUEsVUFBQSxlQUFBLFlBQUEsWUFBQSxFQUFBLE1BS0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxRQUFBLElBQUEscUJBQ0EsS0FBQSxHQUFBLFNBQUEsY0FBQSxPQUNBLEtBQUEsR0FBQSxVQUFBLElBQUEsUUFDQSxLQUFBLEdBQUEsTUFBQSxLQUFBLEVBQUEsS0FDQSxLQUFBLEdBQUEsTUFBQSxJQUFBLEVBQUEsS0FDQSxLQUFBLEdBQUEsaUJBQUEsWUFBQSxLQUFBLGlCQUFBLEtBQUEsT0FpQ0EsUUFBQSxHQUFBLEVBQUEsR0FDQSxRQUFBLElBQUEscUJBQ0EsS0FBQSxHQUFBLFNBQUEsY0FBQSxPQUNBLEtBQUEsR0FBQSxVQUFBLElBQUEsU0FDQSxLQUFBLEdBQUEsTUFBQSxLQUFBLEVBQUEsS0FDQSxLQUFBLEdBQUEsTUFBQSxJQUFBLEVBQUEsS0FDQSxLQUFBLEdBQUEsaUJBQUEsWUFBQSxLQUFBLGlCQUFBLEtBQUEsT0EzRUEsRUFBQSxzQkErSUEsT0F4R0EsR0FBQSxVQUFBLGlCQUFBLFNBQUEsR0FFQSxRQUFBLElBQUEsR0FFQSxLQUFBLFFBQUEsRUFBQSxRQUNBLEtBQUEsUUFBQSxFQUFBLFFBQ0EsS0FBQSxrQkFBQSxLQUFBLGlCQUFBLEtBQUEsTUFDQSxLQUFBLGdCQUFBLEtBQUEsZUFBQSxLQUFBLE1BQ0EsT0FBQSxpQkFBQSxZQUFBLEtBQUEsbUJBQ0EsT0FBQSxpQkFBQSxVQUFBLEtBQUEsaUJBQ0EsS0FBQSxHQUFBLE1BQUEsT0FBQSxLQUlBLEVBQUEsVUFBQSxlQUFBLFNBQUEsR0FDQSxRQUFBLElBQUEsV0FDQSxRQUFBLElBQUEsR0FDQSxPQUFBLG9CQUFBLFlBQUEsS0FBQSxtQkFDQSxPQUFBLG9CQUFBLFVBQUEsS0FBQSxpQkFDQSxLQUFBLEdBQUEsTUFBQSxPQUFBLEdBR0EsRUFBQSxVQUFBLGlCQUFBLFNBQUEsR0FDQSxRQUFBLElBQUEsTUFDQSxRQUFBLElBQUEsR0FDQSxLQUFBLEdBQUEsTUFBQSxLQUFBLEVBQUEsRUFBQSxLQUFBLFFBQUEsS0FDQSxLQUFBLEdBQUEsTUFBQSxJQUFBLEVBQUEsRUFBQSxLQUFBLFFBQUEsTUFhQSxFQUFBLFVBQUEsaUJBQUEsU0FBQSxHQUVBLFFBQUEsSUFBQSxHQUVBLEtBQUEsUUFBQSxFQUFBLFFBQ0EsS0FBQSxRQUFBLEVBQUEsUUFDQSxLQUFBLGtCQUFBLEtBQUEsaUJBQUEsS0FBQSxNQUNBLEtBQUEsZ0JBQUEsS0FBQSxlQUFBLEtBQUEsTUFDQSxPQUFBLGlCQUFBLFlBQUEsS0FBQSxtQkFDQSxPQUFBLGlCQUFBLFVBQUEsS0FBQSxpQkFDQSxLQUFBLEdBQUEsTUFBQSxPQUFBLEtBR0EsRUFBQSxVQUFBLGVBQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxXQUNBLFFBQUEsSUFBQSxHQUNBLE9BQUEsb0JBQUEsWUFBQSxLQUFBLG1CQUNBLE9BQUEsb0JBQUEsVUFBQSxLQUFBLGlCQUNBLEtBQUEsR0FBQSxNQUFBLE9BQUEsR0FHQSxFQUFBLFVBQUEsaUJBQUEsU0FBQSxHQUNBLFFBQUEsSUFBQSxNQUNBLFFBQUEsSUFBQSxHQUNBLEtBQUEsR0FBQSxNQUFBLEtBQUEsRUFBQSxFQUFBLEtBQUEsUUFBQSxLQUNBLEtBQUEsR0FBQSxNQUFBLElBQUEsRUFBQSxFQUFBLEtBQUEsUUFBQSxNQXdDQSxrRENqSkEsRUFBQSxRQUFBLFdBR0EsUUFBQSxLQUVBLE1BQUEsRUFBQSxzRUFDQSxNQUFBLE9BQUEsNERBQ0EsTUFBQSxHQUFBLFlBQUEsa0JBQUEsS0FBQSxNQUNBLEVBQUEsZUFBQSxPQUFBLE9BaUJBLE1BWkEsR0FBQSxVQUFBLGlCQUFBLGFBSUEsRUFBQSxVQUFBLGlCQUFBLGFBSUEsRUFBQSxVQUFBLGVBQUEsYUFJQSIsImZpbGUiOiJzY3JpcHQuZGlzdC5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiKGZ1bmN0aW9uKCl7XG5cdFxuXHR2YXIgV2hpdGVib2FyZEFwcGxpY2F0aW9uID0gcmVxdWlyZShcIi4vY2xhc3Nlcy9XaGl0ZWJvYXJkQXBwbGljYXRpb25cIik7XG5cblx0ZnVuY3Rpb24gaW5pdCgpIHtcblx0XG5cdFx0bmV3IFdoaXRlYm9hcmRBcHBsaWNhdGlvbigpO1xuXHR9XG5cblx0aW5pdCgpO1xufSkoKTsiLCJtb2R1bGUuZXhwb3J0cyA9IChmdW5jdGlvbigpe1xuXG5cdHZhciBXaGl0ZWJvYXJkSGFuZGxlciA9IHJlcXVpcmUoJy4vV2hpdGVib2FyZEhhbmRsZXInKTtcblx0dmFyIHRlbGxlciA9IDA7XG5cblx0ZnVuY3Rpb24gV2hpdGVib2FyZEFwcGxpY2F0aW9uKClcdCB7XG5cdFx0Ly9jbGlja2V2ZW50cyBtYWtlbiB2b29yIGRlIGtub3BwZW4gdmFuIGFkZGVuIGRpbmdlcy5cblx0XHQkKFwiI2FkZGltZ1wiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uKCl7XG5cdFx0XHR2YXIgaW1hZ2UgPSBuZXcgQWRkSW1hZ2UoXG5cdFx0XHRcdE1hdGgucmFuZG9tKCkgKiB3aW5kb3cuaW5uZXJXaWR0aCxcblx0XHRcdFx0TWF0aC5yYW5kb20oKSAqIHdpbmRvdy5pbm5lckhlaWdodFxuXHRcdFx0KTtcblx0XHRcdGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjbnZzemVsZicpLmFwcGVuZENoaWxkKGltYWdlLmVsKTtcblx0XHR9KTtcblx0XHQkKFwiI2FkZHZpZGVvXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24oKXtcblx0XHRcdHZhciB2aWRlbyA9IG5ldyBBZGRWaWRlbyhcblx0XHRcdFx0TWF0aC5yYW5kb20oKSAqIHdpbmRvdy5pbm5lcldpZHRoLFxuXHRcdFx0XHRNYXRoLnJhbmRvbSgpICogd2luZG93LmlubmVySGVpZ2h0XG5cdFx0XHQpO1xuXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NudnN6ZWxmJykuYXBwZW5kQ2hpbGQodmlkZW8uZWwpO1xuXHRcdH0pO1xuXHRcdC8vJChcIiNhZGRub3RlXCIpLm9uKFwiY2xpY2tcIiwgdGhpcy5hZGROb3RlKTtcblx0XHQkKFwiI2FkZG5vdGVcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbigpe1xuXHRcdFx0dmFyIG5vdGUgPSBuZXcgQWRkTm90ZShcblx0XHRcdFx0TWF0aC5yYW5kb20oKSAqIHdpbmRvdy5pbm5lcldpZHRoLFxuXHRcdFx0XHRNYXRoLnJhbmRvbSgpICogd2luZG93LmlubmVySGVpZ2h0XG5cdFx0XHQpO1xuXHRcdFx0ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NudnN6ZWxmJykuYXBwZW5kQ2hpbGQobm90ZS5lbCk7XG5cdFx0fSk7XG5cdFx0XG5cdH1cblxuXHRmdW5jdGlvbiBBZGROb3RlKHgsIHkpeyBcblx0XHRjb25zb2xlLmxvZygnY3JlYXRlZCBuZXcgYmxvY2snKTtcblx0XHR0aGlzLmVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0dGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdub3RlJyk7XG5cdFx0dGhpcy5lbC5zdHlsZS5sZWZ0ID0geCtcInB4XCI7XG5cdFx0dGhpcy5lbC5zdHlsZS50b3AgPSB5K1wicHhcIjtcblx0XHR0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMubW91c2VEb3duSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fVxuXHRcblx0QWRkTm90ZS5wcm90b3R5cGUubW91c2VEb3duSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXtcblx0XHRcblx0XHRjb25zb2xlLmxvZyhldmVudCk7XG5cdFx0Ly90aGlzLmVsLnN0eWxlLnpJbmRleCA9IDEwO1xuXHRcdHRoaXMub2Zmc2V0WCA9IGV2ZW50Lm9mZnNldFg7XG5cdFx0dGhpcy5vZmZzZXRZID0gZXZlbnQub2Zmc2V0WTtcblx0XHR0aGlzLl9tb3VzZU1vdmVIYW5kbGVyID0gdGhpcy5tb3VzZU1vdmVIYW5kbGVyLmJpbmQodGhpcyk7XG5cdFx0dGhpcy5fbW91c2VVcEhhbmRsZXIgPSB0aGlzLm1vdXNlVXBIYW5kbGVyLmJpbmQodGhpcyk7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZUhhbmRsZXIpO1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fbW91c2VVcEhhbmRsZXIpO1x0XG5cdFx0dGhpcy5lbC5zdHlsZS56SW5kZXggPSAxMDA7XHRcblxuXHR9O1xuXHRcblx0QWRkTm90ZS5wcm90b3R5cGUubW91c2VVcEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7XG5cdFx0Y29uc29sZS5sb2coJ21vdXNldXAnKTtcblx0XHRjb25zb2xlLmxvZyhldmVudCk7XG5cdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZUhhbmRsZXIpO1xuXHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fbW91c2VVcEhhbmRsZXIpO1xuXHRcdHRoaXMuZWwuc3R5bGUuekluZGV4ID0gMDtcblx0fTtcblx0XG5cdEFkZE5vdGUucHJvdG90eXBlLm1vdXNlTW92ZUhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7XG5cdFx0Y29uc29sZS5sb2codGhpcyk7XG5cdFx0Y29uc29sZS5sb2coZXZlbnQpO1xuXHRcdHRoaXMuZWwuc3R5bGUubGVmdCA9IChldmVudC54IC0gKHRoaXMub2Zmc2V0WCkpICsgXCJweFwiO1xuXHRcdHRoaXMuZWwuc3R5bGUudG9wID0gKGV2ZW50LnkgLSAodGhpcy5vZmZzZXRZKSkgKyBcInB4XCI7XG5cdH07XG5cblxuXHRmdW5jdGlvbiBBZGRJbWFnZSh4LCB5KXsgXG5cdFx0Y29uc29sZS5sb2coJ2NyZWF0ZWQgbmV3IGJsb2NrJyk7XG5cdFx0dGhpcy5lbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXHRcdHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnaW1hZ2UnKTtcblx0XHR0aGlzLmVsLnN0eWxlLmxlZnQgPSB4K1wicHhcIjtcblx0XHR0aGlzLmVsLnN0eWxlLnRvcCA9IHkrXCJweFwiO1xuXHRcdHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5tb3VzZURvd25IYW5kbGVyLmJpbmQodGhpcykpO1xuXHR9XG5cdFxuXHRBZGRJbWFnZS5wcm90b3R5cGUubW91c2VEb3duSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXtcblx0XHRcblx0XHRjb25zb2xlLmxvZyhldmVudCk7XG5cdFx0Ly90aGlzLmVsLnN0eWxlLnpJbmRleCA9IDEwO1xuXHRcdHRoaXMub2Zmc2V0WCA9IGV2ZW50Lm9mZnNldFg7XG5cdFx0dGhpcy5vZmZzZXRZID0gZXZlbnQub2Zmc2V0WTtcblx0XHR0aGlzLl9tb3VzZU1vdmVIYW5kbGVyID0gdGhpcy5tb3VzZU1vdmVIYW5kbGVyLmJpbmQodGhpcyk7XG5cdFx0dGhpcy5fbW91c2VVcEhhbmRsZXIgPSB0aGlzLm1vdXNlVXBIYW5kbGVyLmJpbmQodGhpcyk7XG5cdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZUhhbmRsZXIpO1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fbW91c2VVcEhhbmRsZXIpO1xuXHRcdHRoaXMuZWwuc3R5bGUuekluZGV4ID0gMTAwO1x0XG5cdH07XG5cdFxuXHRBZGRJbWFnZS5wcm90b3R5cGUubW91c2VVcEhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7XG5cdFx0Y29uc29sZS5sb2coJ21vdXNldXAnKTtcblx0XHRjb25zb2xlLmxvZyhldmVudCk7XG5cdFx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX21vdXNlTW92ZUhhbmRsZXIpO1xuXHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5fbW91c2VVcEhhbmRsZXIpO1xuXHRcdHRoaXMuZWwuc3R5bGUuekluZGV4ID0gMDtcblx0fTtcblx0XG5cdEFkZEltYWdlLnByb3RvdHlwZS5tb3VzZU1vdmVIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpe1xuXHRcdGNvbnNvbGUubG9nKHRoaXMpO1xuXHRcdGNvbnNvbGUubG9nKGV2ZW50KTtcblx0XHR0aGlzLmVsLnN0eWxlLmxlZnQgPSAoZXZlbnQueCAtICh0aGlzLm9mZnNldFgpKSArIFwicHhcIjtcblx0XHR0aGlzLmVsLnN0eWxlLnRvcCA9IChldmVudC55IC0gKHRoaXMub2Zmc2V0WSkpICsgXCJweFwiO1xuXHR9O1xuXG5cdC8qZnVuY3Rpb24gQWRkSW1hZ2UoeCwgeSl7IFxuXHRcdGNvbnNvbGUubG9nKCdjcmVhdGVkIG5ldyBibG9jaycpO1xuXHRcdHRoaXMuZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHR0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ2ltYWdlJyk7XG5cdFx0dGhpcy5lbC5zdHlsZS5sZWZ0ID0geCtcInB4XCI7XG5cdFx0dGhpcy5lbC5zdHlsZS50b3AgPSB5K1wicHhcIjtcblx0XHR0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMubW91c2VEb3duSGFuZGxlci5iaW5kKHRoaXMpKTtcblx0fVxuXHRcblx0QWRkSW1hZ2UucHJvdG90eXBlLm1vdXNlRG93bkhhbmRsZXIgPSBmdW5jdGlvbihldmVudCl7XG5cdFx0XG5cdFx0Y29uc29sZS5sb2coZXZlbnQpO1xuXHRcdC8vdGhpcy5lbC5zdHlsZS56SW5kZXggPSAxMDtcblx0XHR0aGlzLm9mZnNldFggPSBldmVudC5vZmZzZXRYO1xuXHRcdHRoaXMub2Zmc2V0WSA9IGV2ZW50Lm9mZnNldFk7XG5cdFx0dGhpcy5fbW91c2VNb3ZlSGFuZGxlciA9IHRoaXMubW91c2VNb3ZlSGFuZGxlci5iaW5kKHRoaXMpO1xuXHRcdHRoaXMuX21vdXNlVXBIYW5kbGVyID0gdGhpcy5tb3VzZVVwSGFuZGxlci5iaW5kKHRoaXMpO1xuXHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9tb3VzZU1vdmVIYW5kbGVyKTtcblx0XHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX21vdXNlVXBIYW5kbGVyKTtcblx0XHR0aGlzLmVsLnN0eWxlLnpJbmRleCA9IDEwMDtcdFxuXHR9O1xuXHRcblx0QWRkSW1hZ2UucHJvdG90eXBlLm1vdXNlVXBIYW5kbGVyID0gZnVuY3Rpb24oZXZlbnQpe1xuXHRcdGNvbnNvbGUubG9nKCdtb3VzZXVwJyk7XG5cdFx0Y29uc29sZS5sb2coZXZlbnQpO1xuXHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9tb3VzZU1vdmVIYW5kbGVyKTtcblx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX21vdXNlVXBIYW5kbGVyKTtcblx0XHR0aGlzLmVsLnN0eWxlLnpJbmRleCA9IDA7XG5cdH07XG5cdFxuXHRBZGRJbWFnZS5wcm90b3R5cGUubW91c2VNb3ZlSGFuZGxlciA9IGZ1bmN0aW9uKGV2ZW50KXtcblx0XHRjb25zb2xlLmxvZyh0aGlzKTtcblx0XHRjb25zb2xlLmxvZyhldmVudCk7XG5cdFx0dGhpcy5lbC5zdHlsZS5sZWZ0ID0gKGV2ZW50LnggLSAodGhpcy5vZmZzZXRYKSkgKyBcInB4XCI7XG5cdFx0dGhpcy5lbC5zdHlsZS50b3AgPSAoZXZlbnQueSAtICh0aGlzLm9mZnNldFkpKSArIFwicHhcIjtcblx0fTsqL1xuXG5cdHJldHVybiBXaGl0ZWJvYXJkQXBwbGljYXRpb247XG59KSgpOyIsIm1vZHVsZS5leHBvcnRzID0gKGZ1bmN0aW9uKCl7XG5cblxuXHRmdW5jdGlvbiBXaGl0ZWJvYXJkSGFuZGxlcigpIHtcblx0XHQvL2FqYXggY2FsbCB2b29yIGluc2VydGVuIHZhbiBwb3NpdGlvbiBlbiBub3RlZGluZ2Vcblx0XHQkZm9ybSA9ICQoXCI8Zm9ybSBtZXRob2Q9J3Bvc3QnIGFjdGlvbj0nJyBzdHlsZT0nbGVmdDoyMDBweDt0b3A6MjAwcHg7PjwvZm9ybT5cIik7XG5cdFx0JGZvcm0uYXBwZW5kKFwiPHRleHRhcmVhIHJvd3M9JzQnIGNvbHM9JzUwJyBtYXhsZW5ndGg9JzI1OSc+PC90ZXh0YXJlYT5cIik7XG5cdFx0JGZvcm0ub24oXCJtb3VzZWRvd25cIiwgbW91c2VEb3duSGFuZGxlcikuYmluZCh0aGlzKTtcblx0XHQkKFwiLmNhbnZhc3plbGZcIikuYXBwZW5kKCRmb3JtKTtcblxuXHR9XG5cblxuXHRXaGl0ZWJvYXJkSGFuZGxlci5wcm90b3R5cGUubW91c2VEb3duSGFuZGxlciA9IGZ1bmN0aW9uKGUpIHtcblx0XHQvL21vdXNlbW92ZSBlbiBtb3VzZXVwIGFhbiB0b2V2b2VnZW5cblx0fTtcblxuXHRXaGl0ZWJvYXJkSGFuZGxlci5wcm90b3R5cGUubW91c2VNb3ZlSGFuZGxlciA9IGZ1bmN0aW9uKGUpIHtcblx0XHQvL2l0ZW0gbW91c2Vwb3NpZXRpZSBsYXRlbiB2b2xnZW5cblx0fTsgXG5cblx0V2hpdGVib2FyZEhhbmRsZXIucHJvdG90eXBlLm1vdXNlVXBIYW5kbGVyID0gZnVuY3Rpb24oZSkge1xuXHRcdC8vYWpheGNhbGwgdm9vciB1cGRhdGVuIHZhbiBwb3NpdGllc1xuXHR9O1xuXG5cdHJldHVybiBXaGl0ZWJvYXJkSGFuZGxlcjtcbn0pKCk7Il0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9